{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\schedulePull.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\schedulePull.vue","mtime":1578845945409},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBmYiA9IHJlcXVpcmUoJy4uLy4uL2ZpcmViYXNlY29uZmlnLmpzJykNCmltcG9ydCB7ZGJ9IGZyb20gJy4uLy4uL2ZpcmViYXNlY29uZmlnLmpzJw0KaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnZG9tYWluJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ3NjaGVkdWxlUHVsbCcsDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGZvcm06IHsNCiAgICAgICAgICAgICAgICBkYXRlOiAnJywNCiAgICAgICAgICAgICAgICB0aW1lOiAnJywNCiAgICAgICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICAgICAgdHJhY2s6ICcnLA0KICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywNCiAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJywNCiAgICAgICAgICAgICAgICBjaXR5OiAnJywNCiAgICAgICAgICAgICAgICBzdGF0ZTogJycsDQogICAgICAgICAgICAgICAgcG9pbnRzOiAnJywNCiAgICAgICAgICAgICAgICB5ZWFyOiAnMjAyMCcNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB0cmFja1R5cGVzIDogWw0KICAgICAgICAgICAgICAgICdEaXJ0JywgJ1RhcicsJ04vQScNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBwdWxsczoge30sDQogICAgICAgICAgICBzdGF0ZXM6IFsnTU4nLCAnV0knXQ0KICAgICAgICB9DQogICAgfSwNCiAgICBmaXJlc3RvcmUoKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgcHVsbHM6IGRiLmNvbGxlY3Rpb24oInB1bGxzIikud2hlcmUoJ3llYXInLCAnPT0nLCAnMjAyMCcpLA0KICAgICAgICAgICAgLy9jaXRpZXM6IGRiLmNvbGxlY3Rpb24oImNpdGllcyIpDQogICAgICAgIH19LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNyZWF0ZUNpdHlSZWYoKSB7DQogICAgICAgICAgICAgIHJldHVybiAnL2NpdGllcy8nICsgdGhpcy5mb3JtLmNpdHkudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpLmpvaW4oJy0nKSArICcsKycgK3RoaXMuZm9ybS5zdGF0ZS50b0xvd2VyQ2FzZSgpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICANCiAgICAgICAgYWRkRXZlbnQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgZGIuY29sbGVjdGlvbigicHVsbHMiKS5hZGQoew0KICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuZm9ybS5kYXRlLA0KICAgICAgICAgICAgICAgIHRpbWU6IHRoaXMuZm9ybS50aW1lLA0KICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmZvcm0udGl0bGUsDQogICAgICAgICAgICAgICAgdHJhY2s6IHRoaXMuZm9ybS50cmFjaywNCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5mb3JtLmRlc2NyaXB0aW9uLA0KICAgICAgICAgICAgICAgIGFkZHJlc3M6IHRoaXMuZm9ybS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgIGNpdHk6IHRoaXMuZm9ybS5jaXR5LA0KICAgICAgICAgICAgICAgIHN0YXRlOiB0aGlzLmZvcm0uc3RhdGUsDQogICAgICAgICAgICAgICAgcG9pbnRzOiB0aGlzLmZvcm0ucG9pbnRzLA0KICAgICAgICAgICAgICAgIHllYXI6IHRoaXMuZm9ybS55ZWFyLA0KICAgICAgICAgICAgICAgIGNpdHlSZWY6IHRoaXMuY3JlYXRlQ2l0eVJlZg0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihkb2NSZWYpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRG9jdW1lbnQgd3JpdHRlbiB3aXRoIElEOiAiLCBkb2NSZWYuaWQpDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGNpdHlEb2MgPSB0aGlzLmZvcm0uY2l0eS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJykuam9pbignLScpKycsKycrdGhpcy5mb3JtLnN0YXRlLnRvTG93ZXJDYXNlKCk7DQoNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNpdHlEb2MpOw0KDQogICAgICAgICAgICB2YXIgY2l0eVJlZiA9IGRiLmNvbGxlY3Rpb24oImNpdGllcyIpLmRvYyhjaXR5RG9jKTsNCiAgICAgICAgICAgIHJldHVybiBjaXR5UmVmLnNldCh7DQogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5mb3JtLmNpdHksDQogICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuZm9ybS5zdGF0ZSwNCiAgICAgICAgICAgICAgICB0cmFjazogdGhpcy5mb3JtLnRyYWNrDQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDaXR5IHN1Y2Nlc3NmdWxseSB1cGRhdGVkIik7DQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcil7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgdXBkYXRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgfQ0KICAgIA0KDQo="},{"version":3,"sources":["schedulePull.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA","file":"schedulePull.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div>\r\n    <v-card class=\"mx-auto mt-3\">\r\n    <v-card-text>\r\n    <h2>Schedule a Pull</h2>\r\n    <v-form @submit.prevent>\r\n        <v-row>\r\n            <v-col cols=\"12\" md=\"3\">\r\n                <v-text-field v-model=\"form.date\" label=\"Event Date\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n                <v-text-field v-model=\"form.time\" label=\"Event Time\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n               <v-select v-model=\"form.track\"\r\n            :items=\"trackTypes\"\r\n            label=\"Select a Track Type\"\r\n          ></v-select>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n              <v-checkbox\r\n        v-model=\"form.points\"\r\n        label=\"Will points be awarded?\"\r\n        required\r\n      ></v-checkbox>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n                <v-text-field v-model=\"form.title\" label=\"Event Title\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n                <v-textarea\r\n            dense\r\n            label=\"Event Description\"\r\n            v-model=\"form.description\"\r\n          ></v-textarea>\r\n            </v-col>\r\n\r\n            \r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-text-field v-model=\"form.address\" label=\"Event Address\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-text-field v-model=\"form.city\" label=\"Event City\"></v-text-field>\r\n               \r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-select :items=\"states\" label=\"Select a State\" v-model=\"form.state\"></v-select>\r\n               \r\n            </v-col>\r\n            \r\n        </v-row>\r\n        </v-form>\r\n    </v-card-text>\r\n    <v-card-actions>\r\n        <v-btn text >Cancel</v-btn>\r\n        <v-btn text @click=\"addEvent\">Add Event</v-btn>\r\n    </v-card-actions>\r\n        </v-card>\r\n        <v-row>\r\n            <h2>Scheduled Events {{this.$parent.currentYear}}</h2>\r\n            <div v-for=\"pull in pulls\" :key=\"pull['.key']\">{{title}}</div>\r\n        </v-row>\r\n    \r\n    \r\n</div>\r\n</template>\r\n<script>\r\nconst fb = require('../../firebaseconfig.js')\r\nimport {db} from '../../firebaseconfig.js'\r\nimport { create } from 'domain'\r\n\r\nexport default {\r\n    name: 'schedulePull',\r\n    data() {\r\n        return {\r\n            form: {\r\n                date: '',\r\n                time: '',\r\n                title: '',\r\n                track: '',\r\n                description: '',\r\n                address: '',\r\n                city: '',\r\n                state: '',\r\n                points: '',\r\n                year: '2020'\r\n            },\r\n            trackTypes : [\r\n                'Dirt', 'Tar','N/A'\r\n            ],\r\n            pulls: {},\r\n            states: ['MN', 'WI']\r\n        }\r\n    },\r\n    firestore() {\r\n            return {\r\n            pulls: db.collection(\"pulls\").where('year', '==', '2020'),\r\n            //cities: db.collection(\"cities\")\r\n        }},\r\n    computed: {\r\n        createCityRef() {\r\n              return '/cities/' + this.form.city.toLowerCase().split(' ').join('-') + ',+' +this.form.state.toLowerCase()\r\n            }\r\n        },\r\n    methods: {\r\n        \r\n        addEvent: function() {\r\n            db.collection(\"pulls\").add({\r\n                date: this.form.date,\r\n                time: this.form.time,\r\n                title: this.form.title,\r\n                track: this.form.track,\r\n                description: this.form.description,\r\n                address: this.form.address,\r\n                city: this.form.city,\r\n                state: this.form.state,\r\n                points: this.form.points,\r\n                year: this.form.year,\r\n                cityRef: this.createCityRef\r\n            }).then(function(docRef) {\r\n                console.log(\"Document written with ID: \", docRef.id)\r\n            });\r\n            \r\n            var cityDoc = this.form.city.toLowerCase().split(' ').join('-')+',+'+this.form.state.toLowerCase();\r\n\r\n            console.log(cityDoc);\r\n\r\n            var cityRef = db.collection(\"cities\").doc(cityDoc);\r\n            return cityRef.set({\r\n                name: this.form.city,\r\n                state: this.form.state,\r\n                track: this.form.track\r\n            }).then(function() {\r\n                console.log(\"City successfully updated\");\r\n            }).catch(function(error){\r\n                console.error(\"Error updating document: \", error);\r\n            });\r\n\r\n        }\r\n            \r\n        }\r\n    }\r\n    \r\n\r\n</script>"]}]}