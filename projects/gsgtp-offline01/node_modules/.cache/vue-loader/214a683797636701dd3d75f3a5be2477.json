{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\standings.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\standings.vue","mtime":1579541633491},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgICBkYiwgY3VycmVudFVzZXIKfSBmcm9tICcuLi8uLi9maXJlYmFzZWNvbmZpZy5qcycKaW1wb3J0IHsKICAgIG1hcFN0YXRlCn0gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdzdGFuZGluZ3MnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBob29rczoge30sCiAgICAgICAgICAgIHNlbGVjdGVkWWVhcjogJzIwMjAnCiAgICAgICAgfQogICAgfSwKICAgIGZpcmVzdG9yZSgpIHsKICAgICAgICBsZXQgeWVhclJlZiA9IHRoaXMuc2VsZWN0ZWRZZWFyCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaG9va3M6IGRiLmNvbGxlY3Rpb24oJ2hvb2tzJykud2hlcmUoInBvaW50c1llYXIiLCAiPT0iLCB5ZWFyUmVmKQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgY2FsY3VsYXRlUG9pbnRzKCkgewoKICAgICAgICB9CgogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgdmVoaWNsZXNCeUNsYXNzKCkgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gXy5jaGFpbih0aGlzLmhvb2tzKQogICAgICAgICAgICAgICAgLmZpbHRlcihbJ2lzTWVtYmVyJywgdHJ1ZV0pCiAgICAgICAgICAgICAgICAuZmlsdGVyKFsnZHEnLGZhbHNlXSkKICAgICAgICAgICAgICAgIC5ncm91cEJ5KCJ2ZWhpY2xlQ2xhc3MiKQogICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbih2LGlkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVzOiAoXy5ncm91cEJ5KHYsInZlaGljbGVOYW1lIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAudmFsdWUoKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgICAgICAgICAvKmxldCB2Y1JlZiA9IF8uZ3JvdXBCeSh0aGlzLmhvb2tzLCAidmVoaWNsZUNsYXNzIikKICAgICAgICAgICAgY29uc29sZS5sb2codmNSZWYpCgogICAgICAgICAgICBsZXQgbVJlZiA9IF8ubWFwKHZjUmVmLCAoZnVuY3Rpb24odiwgaSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBpOiBfLmdyb3VwQnkodiwgInZlaGljbGVOYW1lIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIH0pKQoKICAgICAgICAgICAgcmV0dXJuIG1SZWYKICAgICAgICAgICAgKi8gfSwKCiAgICAgICAgICAgIHBvaW50c1N0YXRzKCkgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gXy5jaGFpbih0aGlzLmhvb2tzKQogICAgICAgICAgICAgICAgLmZpbHRlcihbJ2lzTWVtYmVyJywgdHJ1ZV0pCiAgICAgICAgICAgICAgICAuZmlsdGVyKFsnZHEnLGZhbHNlXSkKICAgICAgICAgICAgICAgIC5ncm91cEJ5KCJ2ZWhpY2xlQ2xhc3MiKQogICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbih2LGlkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGU6IChfLmNoYWluKF8uZ3JvdXBCeSh2LCd2ZWhpY2xlTmFtZScpKQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGgsaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50czogXy5zdW1CeShoLCdwb2ludHMnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KS5vcmRlckJ5KCdwb2ludHMnLCdkZXNjJykKICAgICAgICAgICAgICAgICAgICAgICAgLnZhbHVlKCkKICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC52YWx1ZSgpOwoKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKCiAgICAgICAgICAgIC8qbGV0IHZjUmVmID0gXy5ncm91cEJ5KHRoaXMuaG9va3MsICJ2ZWhpY2xlQ2xhc3MiKQogICAgICAgICAgICBjb25zb2xlLmxvZyh2Y1JlZikKCiAgICAgICAgICAgIGxldCBtUmVmID0gXy5tYXAodmNSZWYsIChmdW5jdGlvbih2LCBpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGk6IF8uZ3JvdXBCeSh2LCAidmVoaWNsZU5hbWUiKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgfSkpCgogICAgICAgICAgICByZXR1cm4gbVJlZgogICAgICAgICAgICAqLyB9LAogICAgICAgICAgICAKICAgIH0KICAgIAp9Cg=="},{"version":3,"sources":["standings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA","file":"standings.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div id=\"standings\">\r\n        \r\n        <v-card color=\"red darken-4\" dark>\r\n            <v-container>\r\n                <v-card-title> Standings<v-spacer></v-spacer>\r\n                    <v-text-field v-model=\"selectedYear\" label=\"Year\" persistent-hint disabled\r\n                        hint=\"Year must always be in YYYY format. Data only goes back to 2019.\"></v-text-field>\r\n                </v-card-title>\r\n            </v-container>\r\n        </v-card>\r\n\r\n        <div v-for=\"v in pointsStats\" :key=\"v['.index']\">\r\n            <v-card class=\"mt-5\" light >\r\n                <v-container>\r\n                    <v-card-title>{{v.name}}</v-card-title>\r\n                    <v-card-text>\r\n                        <v-list>\r\n                            <v-list-item-group active-class=\"pink lighten-5\" light>\r\n                                <v-list-item v-for=\"(h,index) in v.vehicle\" :key=\"h['.key']\">\r\n                                  <v-list-item-content>  {{h.name}}</v-list-item-content>\r\n                                  <v-list-item-icon>\r\n                                      <v-icon>\r\n                                          fal fa-star {{index}}\r\n                                      </v-icon>\r\n                                  </v-list-item-icon>\r\n                                </v-list-item>\r\n                            </v-list-item-group>\r\n                        </v-list>\r\n                    \r\n                    </v-card-text>\r\n                </v-container>\r\n                   \r\n                \r\n            </v-card>\r\n            \r\n            \r\n            \r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {\r\n        db, currentUser\r\n    } from '../../firebaseconfig.js'\r\n    import {\r\n        mapState\r\n    } from 'vuex'\r\n\r\n    export default {\r\n        name: 'standings',\r\n        data() {\r\n            return {\r\n                hooks: {},\r\n                selectedYear: '2020'\r\n            }\r\n        },\r\n        firestore() {\r\n            let yearRef = this.selectedYear\r\n            return {\r\n                hooks: db.collection('hooks').where(\"pointsYear\", \"==\", yearRef)\r\n            }\r\n        },\r\n        methods: {\r\n            calculatePoints() {\r\n\r\n            }\r\n\r\n        },\r\n        computed: {\r\n            vehiclesByClass() {\r\n                var result = _.chain(this.hooks)\r\n                    .filter(['isMember', true])\r\n                    .filter(['dq',false])\r\n                    .groupBy(\"vehicleClass\")\r\n                    .map(function(v,id) {\r\n                        return {\r\n                            name: id,\r\n                            vehicles: (_.groupBy(v,\"vehicleName\"))\r\n                                \r\n                        }\r\n                    })\r\n                    \r\n                    .value();\r\n\r\n                    return result\r\n\r\n                /*let vcRef = _.groupBy(this.hooks, \"vehicleClass\")\r\n                console.log(vcRef)\r\n\r\n                let mRef = _.map(vcRef, (function(v, i) {\r\n                    return {\r\n                        i: _.groupBy(v, \"vehicleName\")\r\n                    }\r\n                \r\n                }))\r\n\r\n                return mRef\r\n                */ },\r\n\r\n                pointsStats() {\r\n                var result = _.chain(this.hooks)\r\n                    .filter(['isMember', true])\r\n                    .filter(['dq',false])\r\n                    .groupBy(\"vehicleClass\")\r\n                    .map(function(v,id) {\r\n                        return {\r\n                            name: id,\r\n                            vehicle: (_.chain(_.groupBy(v,'vehicleName'))\r\n                            .map(function(h,k) {\r\n                                return {\r\n                                    name: k,\r\n                                    points: _.sumBy(h,'points')\r\n                                }\r\n                            }).orderBy('points','desc')\r\n                            .value()\r\n                            )}\r\n                    })\r\n                    \r\n                    .value();\r\n\r\n                    return result\r\n\r\n                /*let vcRef = _.groupBy(this.hooks, \"vehicleClass\")\r\n                console.log(vcRef)\r\n\r\n                let mRef = _.map(vcRef, (function(v, i) {\r\n                    return {\r\n                        i: _.groupBy(v, \"vehicleName\")\r\n                    }\r\n                \r\n                }))\r\n\r\n                return mRef\r\n                */ },\r\n                \r\n        }\r\n        \r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.winner {\r\n    font-size: 1.1em;\r\n\r\n}\r\n</style>"]}]}