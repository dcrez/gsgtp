{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\components\\addHooks.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\components\\addHooks.vue","mtime":1579964513863},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2RifSBmcm9tICcuLi8uLi9maXJlYmFzZWNvbmZpZy5qcycNCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2FkZEhvb2tzJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcHVsbHM6IHt9LA0KICAgICAgdmVoaWNsZUNsYXNzZXM6IHt9LA0KICAgICAgaG9vazoge30sDQogICAgICBidG1Ib29rOiBmYWxzZSwNCiAgICAgIGhvb2tNZW1iZXI6IGZhbHNlLA0KICAgICAgaG9va0Zvcm06IHsNCiAgICAgICAgc3VjY2Vzc01lc3NhZ2U6ICcnLA0KICAgICAgICBlcnJvck1lc3NhZ2U6ICcnLA0KICAgICAgICBub25NZW1iZXI6IHsNCiAgICAgICAgdmVoaWNsZTogJycsDQogICAgICAgIH0sDQogICAgICAgIG1lbWJlcjogew0KICAgICAgICAgIHZlaGljbGU6ICcnDQogICAgICAgIH0sDQogICAgICAgIGRpc3RhbmNlOiAnJywNCiAgICAgICAgZHE6IGZhbHNlLA0KICAgICAgICBwdWxsOiB7fSwNCiAgICAgICAgcHVsbGVyTmFtZTogJycsDQogICAgICAgIHZlaGljbGVDbGFzczogJycNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGZpcmVzdG9yZSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy9wdWxsOiBkYi5jb2xsZWN0aW9uKCdwdWxscycpLmRvYyhjdXJyZW50UHVsbCksDQogICAgICBob29rOiBkYi5jb2xsZWN0aW9uKCdob29rcycpLm9yZGVyQnkoImNyZWF0ZWQiLCAiZGVzYyIpLmxpbWl0KDEpLA0KICAgICAgbWVtYmVyczogZGIuY29sbGVjdGlvbignbWVtYmVycycpLA0KICAgICAgdmVoaWNsZXM6IGRiLmNvbGxlY3Rpb24oJ3ZlaGljbGVzJyksDQogICAgICB2ZWhpY2xlQ2xhc3NlczogZGIuY29sbGVjdGlvbigndmVoaWNsZUNsYXNzZXMnKS5vcmRlckJ5KCJuYW1lIiwgImFzYyIpLA0KICAgICAgcHVsbHM6IGRiLmNvbGxlY3Rpb24oJ3B1bGxzJykub3JkZXJCeSgnZGF0ZScsICdkZXNjJykNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoWydjdXJyZW50VXNlciddKSwNCiAgICB2ZWhpY2xlTmFtZSgpIHsNCiAgICAgIGxldCB2ZWhpY2xlTmFtZQ0KICAgICAgaWYgKHRoaXMuaG9va01lbWJlcikgew0KICAgICAgICByZXR1cm4gdmVoaWNsZU5hbWUgPSB0aGlzLmhvb2tGb3JtLm1lbWJlci52ZWhpY2xlLm5hbWUNCiAgICAgIH0NCiAgICAgIGVsc2Ugew0KICAgICAgICByZXR1cm4gdmVoaWNsZU5hbWUgPSB0aGlzLmhvb2tGb3JtLm5vbk1lbWJlci52ZWhpY2xlDQogICAgICB9DQogICAgfQ0KICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIGFkZEhvb2s6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgLy8gc3RhcnQgdHJhbnNpdGlvbi9sb2FkaW5nIHZpZXcNCiAgICAgICAgICAgDQogICAgICAgICAgICBsZXQgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhZGRIb29rRm9ybSIpDQogICAgICAgICAgICBsZXQgdm4gPSB0aGlzLnZlaGljbGVOYW1lDQogICAgICAgICAgICBsZXQgaGYgPSB0aGlzLmhvb2tGb3JtDQogICAgICAgICAgICAvL2xldCBkb2MgPSB0aGlzLnZlaGljbGVGb3JtLm5hbWUudG9Mb3dlckNhc2UoKS5zcGxpdCgiICIpLmpvaW4oIi0iKQ0KDQogICAgICAgICAgICAvLyBhZGQgaG9vayB0byBGaXJlc3RvcmUNCiAgICAgICAgICAgIGxldCBwdWxsWWVhciA9IHRoaXMuaG9va0Zvcm0ucHVsbC5kYXRlLnN1YnN0cmluZygwLDQpDQogICAgICAgICAgICBsZXQgZWFjaENsYXNzID0gdGhpcy5ob29rRm9ybS52ZWhpY2xlQ2xhc3MNCg0KICAgICAgICAgICAgZm9yKGxldCBpPTAsIGxlbj1lYWNoQ2xhc3MubGVuZ3RoOyBpPGxlbjsgaSsrKSB7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGxldCB0aGlzQ2xhc3MgPSBlYWNoQ2xhc3NbaV0ubmFtZQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJob29rcyIpLmFkZCh7DQogICAgICAgICAgICAgICAgdmVoaWNsZU5hbWU6IHZuLA0KICAgICAgICAgICAgICAgIHB1bGw6IHRoaXMuaG9va0Zvcm0ucHVsbC5kYXRlLA0KICAgICAgICAgICAgICAgIHB1bGxSZWY6IHRoaXMuaG9va0Zvcm0ucHVsbC5jaXR5UmVmLA0KICAgICAgICAgICAgICAgIHB1bGxJZDogdGhpcy5ob29rRm9ybS5wdWxsLmlkLA0KICAgICAgICAgICAgICAgIHB1bGxlck5hbWU6IHRoaXMuaG9va0Zvcm0ucHVsbGVyTmFtZSwNCiAgICAgICAgICAgICAgICB0cmFjazogdGhpcy5ob29rRm9ybS5wdWxsLnRyYWNrLA0KICAgICAgICAgICAgICAgIGlzTWVtYmVyOiB0aGlzLmhvb2tNZW1iZXIsDQogICAgICAgICAgICAgICAgZHE6IHRoaXMuaG9va0Zvcm0uZHEsDQogICAgICAgICAgICAgICAgdmVoaWNsZUNsYXNzOiB0aGlzQ2xhc3MsDQogICAgICAgICAgICAgICAgcHVsbE9yZGVyOiAoTWF0aC5yYW5kb20oKSAqIDEwMCksDQogICAgICAgICAgICAgICAgcG9pbnRzWWVhcjogcHVsbFllYXIsDQogICAgICAgICAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKSwNCiAgICAgICAgICAgICAgICBjcmVhdGVkQnk6IHRoaXMuY3VycmVudFVzZXIudWlkDQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGRvY1JlZikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJIb29rIHdyaXR0ZW4gd2l0aCBJRDogIiwgZG9jUmVmLmlkKQ0KICAgICAgICAgICAgICAgIGhmLnN1Y2Nlc3NNZXNzYWdlID0gIkhvb2socykgYWRkZWQgc3VjY2Vzc2Z1bGx5ISINCiAgICAgICAgICAgICAgICBoZi5wdWxsZXJOYW1lID0gJycsDQogICAgICAgICAgICAgICAgaGYuaXNNZW1iZXIgPSBmYWxzZSwNCiAgICAgICAgICAgICAgICBoZi52ZWhpY2xlQ2xhc3MgPSAnJw0KICAgICAgICAgICAgICAgIGhmLm1lbWJlci52ZWhpY2xlID0gJycsDQogICAgICAgICAgICAgICAgaGYubm9uTWVtYmVyLnZlaGljbGUgPSAnJw0KICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICB0aGlzLmhvb2tGb3JtLmVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgfSwNCiAgICAgIGRpc21pc3MobSkgew0KICAgICAgICBtID0gIiINCiAgICAgIH0NCiAgICB9DQogIH0NCg0K"},{"version":3,"sources":["addHooks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"addHooks.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n         <v-card>\r\n         <v-container>\r\n           <v-card-title>\r\n           Add Hook\r\n           \r\n           </v-card-title>\r\n           <v-alert v-if=\"hookForm.successMessage\" color=\"success\" dark>  \r\n             {{hookForm.successMessage}}\r\n             <template v-slot:actions>\r\n               <v-btn text @click=\"dismiss(this.hookForm.successMessage)\">\r\n                 <v-icon>fas fa-times</v-icon>\r\n               </v-btn>\r\n             </template>\r\n           </v-alert>\r\n           <v-alert v-if=\"!currentUser\" color=\"error\" dark>  \r\n             You must be signed in to add a hook / register for a pull.\r\n             <template v-slot:actions>\r\n               <v-btn text @click=\"dismiss(this.hookForm.successMessage)\">\r\n                 <v-icon>fas fa-times</v-icon>\r\n               </v-btn>\r\n             </template>\r\n           </v-alert>\r\n           <v-alert v-if=\"hookForm.errorMessage\" dark color=\"primary\">{{hookForm.errorMessage}}</v-alert>\r\n           \r\n           <v-card-text>\r\n             <v-form id=\"addHookForm\">\r\n             <v-row>\r\n               <v-col cols=\"6\">\r\n               <v-autocomplete\r\n                v-model=\"hookForm.pull\"\r\n                :items=\"pulls\"\r\n                item-text=\"date\"\r\n                item-value=\"id\"\r\n                return-object\r\n                color=\"secondary\"\r\n                label=\"Pull Date\"\r\n                clearable\r\n                >\r\n               </v-autocomplete> \r\n               </v-col>\r\n               \r\n             </v-row>\r\n             <v-row>\r\n               \r\n             <v-col cols=\"12\" md=\"6\">\r\n               <v-text-field label=\"Vehicle Name\" v-model=\"hookForm.nonMember.vehicle\" v-if=\"!hookMember\" color=\"secondary\"></v-text-field>\r\n               <v-autocomplete \r\n                v-model=\"hookForm.member.vehicle\" \r\n                label=\"Lookup Vehicle\"\r\n                v-if=\"hookMember\"\r\n                :items=\"vehicles\" \r\n                hint=\"Select a vehicle\"\r\n                item-text=\"name\"\r\n                item-value=\"id\"\r\n                persistent-hint\r\n                color=\"secondary\"\r\n                return-object\r\n                chips\r\n                clearable\r\n                >\r\n                </v-autocomplete>\r\n             </v-col>\r\n             <v-col>\r\n               <v-text-field v-model=\"hookForm.pullerName\" color=\"secondary\" clearable label=\"Puller Name\"></v-text-field>\r\n                \r\n             </v-col>\r\n             </v-row>\r\n             <v-row>\r\n               <v-col>\r\n                 <v-autocomplete v-model=\"hookForm.vehicleClass\" :items=\"vehicleClasses\" multiple clearable chips return-object item-text=\"name\" item-value=\"name\" color=\"secondary\" label=\"Choose a vehicle class (or classes).\">\r\n                </v-autocomplete>\r\n               </v-col>\r\n               <v-col cols=\"6\" md=\"3\">\r\n            <v-switch v-model=\"hookMember\" label=\"Member?\" color=\"secondary\" inset></v-switch>\r\n               </v-col>\r\n             </v-row>\r\n                \r\n               <v-card-actions>\r\n               <v-spacer></v-spacer>\r\n               <v-btn @click=\"addHook\" text color=\"green\">Add hook</v-btn>\r\n               </v-card-actions>\r\n             \r\n           </v-form>\r\n           </v-card-text>\r\n         </v-container>\r\n         </v-card>\r\n     \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {db} from '../../firebaseconfig.js'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'addHooks',\r\n  data() {\r\n    return {\r\n      pulls: {},\r\n      vehicleClasses: {},\r\n      hook: {},\r\n      btmHook: false,\r\n      hookMember: false,\r\n      hookForm: {\r\n        successMessage: '',\r\n        errorMessage: '',\r\n        nonMember: {\r\n        vehicle: '',\r\n        },\r\n        member: {\r\n          vehicle: ''\r\n        },\r\n        distance: '',\r\n        dq: false,\r\n        pull: {},\r\n        pullerName: '',\r\n        vehicleClass: ''\r\n      }\r\n    }\r\n  },\r\n  firestore() {\r\n    return {\r\n      //pull: db.collection('pulls').doc(currentPull),\r\n      hook: db.collection('hooks').orderBy(\"created\", \"desc\").limit(1),\r\n      members: db.collection('members'),\r\n      vehicles: db.collection('vehicles'),\r\n      vehicleClasses: db.collection('vehicleClasses').orderBy(\"name\", \"asc\"),\r\n      pulls: db.collection('pulls').orderBy('date', 'desc')\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser']),\r\n    vehicleName() {\r\n      let vehicleName\r\n      if (this.hookMember) {\r\n        return vehicleName = this.hookForm.member.vehicle.name\r\n      }\r\n      else {\r\n        return vehicleName = this.hookForm.nonMember.vehicle\r\n      }\r\n    }\r\n  },\r\n    methods: {\r\n      addHook: function() {\r\n            // start transition/loading view\r\n           \r\n            let form = document.getElementById(\"addHookForm\")\r\n            let vn = this.vehicleName\r\n            let hf = this.hookForm\r\n            //let doc = this.vehicleForm.name.toLowerCase().split(\" \").join(\"-\")\r\n\r\n            // add hook to Firestore\r\n            let pullYear = this.hookForm.pull.date.substring(0,4)\r\n            let eachClass = this.hookForm.vehicleClass\r\n\r\n            for(let i=0, len=eachClass.length; i<len; i++) {\r\n            \r\n            let thisClass = eachClass[i].name\r\n            \r\n            db.collection(\"hooks\").add({\r\n                vehicleName: vn,\r\n                pull: this.hookForm.pull.date,\r\n                pullRef: this.hookForm.pull.cityRef,\r\n                pullId: this.hookForm.pull.id,\r\n                pullerName: this.hookForm.pullerName,\r\n                track: this.hookForm.pull.track,\r\n                isMember: this.hookMember,\r\n                dq: this.hookForm.dq,\r\n                vehicleClass: thisClass,\r\n                pullOrder: (Math.random() * 100),\r\n                pointsYear: pullYear,\r\n                created: new Date(),\r\n                createdBy: this.currentUser.uid\r\n            }).then(function(docRef) {\r\n                console.log(\"Hook written with ID: \", docRef.id)\r\n                hf.successMessage = \"Hook(s) added successfully!\"\r\n                hf.pullerName = '',\r\n                hf.isMember = false,\r\n                hf.vehicleClass = ''\r\n                hf.member.vehicle = '',\r\n                hf.nonMember.vehicle = ''\r\n               \r\n            }).catch(err => {\r\n              this.hookForm.errorMessage = err.message\r\n            });\r\n            }\r\n            \r\n      },\r\n      dismiss(m) {\r\n        m = \"\"\r\n      }\r\n    }\r\n  }\r\n\r\n</script>"]}]}