{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\store\\index.js","mtime":1621559101693},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy9kYW5pZS9HaXRIdWIvZGNyZXouZ2l0aHViLmlvL3Byb2plY3RzL2dzZ3RwLW9mZmxpbmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvZGFuaWUvR2l0SHViL2RjcmV6LmdpdGh1Yi5pby9wcm9qZWN0cy9nc2d0cC1vZmZsaW5lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKCnZhciBfYWN0aW9uczsKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgdnVleGZpcmVNdXRhdGlvbnMsIGZpcmVzdG9yZUFjdGlvbiB9IGZyb20gJ3Z1ZXhmaXJlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7Cgp2YXIgZmIgPSByZXF1aXJlKCcuLi8uLi9maXJlYmFzZWNvbmZpZy5qcycpOwoKaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi9maXJlYmFzZWNvbmZpZyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsKVnVlLnVzZShWdWV4KTsKdmFyIGQgPSBuZXcgRGF0ZSgpOwp2YXIgY3VycmVudFllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgY3VycmVudFVzZXI6IHt9LAogICAgdXNlclByb2ZpbGU6IHt9LAogICAgcHVsbHM6IFtdCiAgfSwKICBtdXRhdGlvbnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdnVleGZpcmVNdXRhdGlvbnMpLCB7fSwgewogICAgc2V0Q3VycmVudFVzZXI6IGZ1bmN0aW9uIHNldEN1cnJlbnRVc2VyKHN0YXRlLCB2YWwpIHsKICAgICAgc3RhdGUuY3VycmVudFVzZXIgPSB2YWw7CiAgICB9LAogICAgc2V0VXNlclByb2ZpbGU6IGZ1bmN0aW9uIHNldFVzZXJQcm9maWxlKHN0YXRlLCB2YWwpIHsKICAgICAgc3RhdGUudXNlclByb2ZpbGUgPSB2YWw7CiAgICB9LAogICAgc2V0VXNlclJvbGU6IGZ1bmN0aW9uIHNldFVzZXJSb2xlKHN0YXRlLCB2YWwpIHsKICAgICAgc3RhdGUudXNlclJvbGUgPSB2YWw7CiAgICB9CiAgfSksCiAgYWN0aW9uczogKF9hY3Rpb25zID0gewogICAgYmluZFB1bGxzOiBmaXJlc3RvcmVBY3Rpb24oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIGJpbmRGaXJlc3RvcmVSZWYgPSBfcmVmLmJpbmRGaXJlc3RvcmVSZWY7CiAgICAgIHZhciBmaWx0ZXJlZFB1bGxzID0gZmIuY29sbGVjdGlvbigncHVsbHMnKS5vcmRlckJ5KCJkYXRlIiwgImRlc2MiKS53aGVyZSgneWVhcicsICc9PScsIGN1cnJlbnRZZWFyKTsKICAgICAgY29uc29sZS5sb2coZmlsdGVyZWRQdWxscyk7CiAgICAgIHJldHVybiBiaW5kRmlyZXN0b3JlUmVmKCdwdWxscycsIGZpbHRlcmVkUHVsbHMpOwogICAgfSksCiAgICAvLyBzaWduIGluCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZjIsIGZvcm0pIHsKICAgICAgdmFyIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2g7CgogICAgICB2YXIgX2ZiJGF1dGgkc2lnbkluV2l0aEVtID0gZmIuYXV0aC5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChmb3JtLmVtYWlsLCBmb3JtLnBhc3N3b3JkKSwKICAgICAgICAgIHVzZXIgPSBfZmIkYXV0aCRzaWduSW5XaXRoRW0udXNlcjsgLy8gZmV0Y2ggcHJvZmlsZQoKCiAgICAgIGRpc3BhdGNoKCdmZXRjaFVzZXJQcm9maWxlJywgdXNlcik7CiAgICB9LAogICAgZmV0Y2hVc2VyUHJvZmlsZTogZnVuY3Rpb24gZmV0Y2hVc2VyUHJvZmlsZShfcmVmMywgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICB1c2VycyA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7CiAgICAgIHZhciB1c2VyUHJvZmlsZSA9IHVzZXJzLmRvYyh1c2VyLnVpZCkuZ2V0KCk7CiAgICAgIGNvbW1pdCgnc2V0VXNlclByb2ZpbGUnLCB1c2VyUHJvZmlsZS5kYXRhKCkpOwogICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgfQogIH0sIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgImZldGNoVXNlclByb2ZpbGUiLCBmdW5jdGlvbiBmZXRjaFVzZXJQcm9maWxlKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjQuc3RhdGU7CiAgICBmYi51c2Vycy5kb2Moc3RhdGUuY3VycmVudFVzZXIudWlkKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29tbWl0KCdzZXRVc2VyUHJvZmlsZScsIHJlcy5kYXRhKCkpOwogICAgICBjb21taXQoJ3NldFVzZXJSb2xlJywgcmVzLmRhdGEoKS5yb2xlKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgIH0pOwogIH0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsICJjbGVhckRhdGEiLCBmdW5jdGlvbiBjbGVhckRhdGEoX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICBjb21taXQoJ3NldEN1cnJlbnRVc2VyJywge30pOwogICAgY29tbWl0KCdzZXRVc2VyUHJvZmlsZScsIHt9KTsKICAgIGNvbW1pdCgnc2V0VXNlclJvbGUnLCBudWxsKTsKICB9KSwgX2FjdGlvbnMpLAogIG1vZHVsZXM6IHt9Cn0pOw=="},{"version":3,"sources":["C:/Users/danie/GitHub/dcrez.github.io/projects/gsgtp-offline/src/store/index.js"],"names":["Vue","vuexfireMutations","firestoreAction","Vuex","fb","require","db","router","use","d","Date","currentYear","getFullYear","Store","state","currentUser","userProfile","pulls","mutations","setCurrentUser","val","setUserProfile","setUserRole","userRole","actions","bindPulls","bindFirestoreRef","filteredPulls","collection","orderBy","where","console","log","login","form","dispatch","auth","signInWithEmailAndPassword","email","password","user","fetchUserProfile","commit","users","doc","uid","get","data","push","then","res","role","catch","err","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport { vuexfireMutations, firestoreAction } from 'vuexfire'\nimport Vuex from 'vuex'\nconst fb = require('../../firebaseconfig.js')\nimport {db} from '../../firebaseconfig'\nimport router from '../router'\n\n\nVue.use(Vuex)\n\nvar d = new Date();\nlet currentYear = d.getFullYear();\n\nexport default new Vuex.Store({\n  state: {\n    currentUser: {},\n    userProfile: {},\n    pulls: []\n},\n  mutations: {\n    ...vuexfireMutations,\n    setCurrentUser(state, val) {\n        state.currentUser = val\n    },\n    setUserProfile(state, val) {\n        state.userProfile = val\n    },\n    setUserRole(state, val) {\n      state.userRole = val\n  }\n},\n  actions: {\n    bindPulls: firestoreAction(({bindFirestoreRef}) => {\n      var filteredPulls = fb.collection('pulls').orderBy(\"date\", \"desc\").where('year', '==', currentYear)\n      console.log(filteredPulls)\n      return bindFirestoreRef('pulls', filteredPulls )\n    }),\n    // sign in\n    login({ dispatch}, form) {\n      const {user} = fb.auth.signInWithEmailAndPassword(form.email, form.password)\n\n    // fetch profile\n    dispatch('fetchUserProfile', user)\n    },\n\n    fetchUserProfile({commit}, user) {\n      users = db.collection('users')\n      const userProfile =  users.doc(user.uid).get()\n\n      commit('setUserProfile', userProfile.data())\n\n      router.push('/')\n    },\n\n    fetchUserProfile({ commit, state }) {\n        fb.users.doc(state.currentUser.uid).get().then(res => {\n            commit('setUserProfile', res.data())\n            commit('setUserRole', res.data().role)\n        }).catch(err => {\n            console.log(err)\n        })\n    },\n    clearData({ commit }) {\n      commit('setCurrentUser', {})\n      commit('setUserProfile', {})\n      commit('setUserRole', null)\n    }\n},\n  modules: {\n  }\n})\n"]}]}