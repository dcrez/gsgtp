{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\schedulePull.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\schedulePull.vue","mtime":1579138482861},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBmYiA9IHJlcXVpcmUoJy4uLy4uL2ZpcmViYXNlY29uZmlnLmpzJykNCmltcG9ydCB7ZGJ9IGZyb20gJy4uLy4uL2ZpcmViYXNlY29uZmlnLmpzJw0KaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnZG9tYWluJw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnc2NoZWR1bGVQdWxsJywNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc2VhcmNoOiAnJywNCiAgICAgICAgICAgIGZvcm06IHsNCiAgICAgICAgICAgICAgICBkYXRlOiAnJywNCiAgICAgICAgICAgICAgICB0aW1lOiAnJywNCiAgICAgICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICAgICAgdHJhY2s6IGZhbHNlLA0KICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywNCiAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJywNCiAgICAgICAgICAgICAgICBjaXR5OiAnJywNCiAgICAgICAgICAgICAgICBzdGF0ZTogJycsDQogICAgICAgICAgICAgICAgcG9pbnRzOiAnJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHRyYWNrVHlwZXMgOiBbDQogICAgICAgICAgICAgICAgJ0RpcnQnLCAnVGFyJywnTi9BJw0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIHB1bGxzOiB7fSwNCiAgICAgICAgICAgIHN0YXRlczogWydNTicsICdXSSddLA0KICAgICAgICAgICAgcGVyZm9ybWluZ1JlcXVlc3Q6IGZhbHNlLA0KICAgICAgICAgICAgeWVhcjogJzIwMjAnLA0KICAgICAgICAgICAgaGVhZGVyczogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0V2ZW50IERhdGUnLA0KICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdkYXRlJw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnVGl0bGUnLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3RpdGxlJw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQWRkcmVzcycsDQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnYWRkcmVzcycNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NpdHknLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ2NpdHknDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdTdGF0ZScsDQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnc3RhdGUnDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdQb2ludHMnLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3BvaW50cycNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1RyYWNrJywNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICd0cmFjaycNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgIH0NCiAgICB9LA0KICAgIGZpcmVzdG9yZSgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBwdWxsczogZGIuY29sbGVjdGlvbigicHVsbHMiKS5vcmRlckJ5KCJkYXRlIiwgImRlc2MiKQ0KICAgICAgICAgICAgLy9jaXRpZXM6IGRiLmNvbGxlY3Rpb24oImNpdGllcyIpDQogICAgICAgIH19LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNyZWF0ZUNpdHlSZWYoKSB7DQogICAgICAgICAgICAgIHJldHVybiAnL2NpdGllcy8nICsgdGhpcy5mb3JtLmNpdHkudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpLmpvaW4oJy0nKSArICcsKycgK3RoaXMuZm9ybS5zdGF0ZS50b0xvd2VyQ2FzZSgpDQogICAgICAgICAgICB9LA0KICAgICAgICBnZXRZZWFyKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybS5kYXRlLnN1YnN0cmluZygwLDQpDQogICAgICAgIH0NCiAgICAgICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIA0KICAgICAgICBhZGRFdmVudDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAvLyBzdGFydCB0cmFuc2l0aW9uL2xvYWRpbmcgdmlldw0KICAgICAgICAgICAgdGhpcy5wZXJmb3JtaW5nUmVxdWVzdCA9IHRydWUNCg0KICAgICAgICAgICAgLy8gYWRkIHB1bGwgdG8gRmlyZXN0b3JlDQogICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJwdWxscyIpLmFkZCh7DQogICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5mb3JtLmRhdGUsDQogICAgICAgICAgICAgICAgdGltZTogdGhpcy5mb3JtLnRpbWUsDQogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuZm9ybS50aXRsZSwNCiAgICAgICAgICAgICAgICB0cmFjazogdGhpcy5mb3JtLnRyYWNrLA0KICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmZvcm0uZGVzY3JpcHRpb24sDQogICAgICAgICAgICAgICAgYWRkcmVzczogdGhpcy5mb3JtLmFkZHJlc3MsDQogICAgICAgICAgICAgICAgY2l0eTogdGhpcy5mb3JtLmNpdHksDQogICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuZm9ybS5zdGF0ZSwNCiAgICAgICAgICAgICAgICBwb2ludHM6IHRoaXMuZm9ybS5wb2ludHMsDQogICAgICAgICAgICAgICAgeWVhcjogdGhpcy5nZXRZZWFyLA0KICAgICAgICAgICAgICAgIGNpdHlSZWY6IHRoaXMuY3JlYXRlQ2l0eVJlZiwNCiAgICAgICAgICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpDQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGRvY1JlZikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEb2N1bWVudCB3cml0dGVuIHdpdGggSUQ6ICIsIGRvY1JlZi5pZCkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDcmVhdGUgQ2l0eSBJRCBmb3IgZG9jdW1lbnQgc3RvcmFnZSBpbiBGaXJlc3RvcmUNCiAgICAgICAgICAgIHZhciBjaXR5RG9jID0gdGhpcy5mb3JtLmNpdHkudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpLmpvaW4oJy0nKSsnLCsnK3RoaXMuZm9ybS5zdGF0ZS50b0xvd2VyQ2FzZSgpOw0KDQogICAgICAgICAgICBjb25zb2xlLmxvZyhjaXR5RG9jKTsNCg0KICAgICAgICAgICAgLy8gYWRkIGNpdHkgdG8gRmlyZXN0b3JlDQogICAgICAgICAgICB2YXIgY2l0eVJlZiA9IGRiLmNvbGxlY3Rpb24oImNpdGllcyIpLmRvYyhjaXR5RG9jKTsNCiAgICAgICAgICAgIHJldHVybiBjaXR5UmVmLnNldCh7DQogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5mb3JtLmNpdHksDQogICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuZm9ybS5zdGF0ZSwNCiAgICAgICAgICAgICAgICB0cmFjazogdGhpcy5mb3JtLnRyYWNrDQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDaXR5IHN1Y2Nlc3NmdWxseSB1cGRhdGVkIik7DQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcil7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgdXBkYXRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICB0aGlzLnBlcmZvcm1pbmdSZXF1ZXN0ID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgICAgICAgICAgZGF0ZTogJycsDQogICAgICAgICAgICAgICAgdGltZTogJycsDQogICAgICAgICAgICAgICAgdGl0bGU6ICcnLA0KICAgICAgICAgICAgICAgIHRyYWNrOiAnJywNCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsDQogICAgICAgICAgICAgICAgYWRkcmVzczogJycsDQogICAgICAgICAgICAgICAgY2l0eTogJycsDQogICAgICAgICAgICAgICAgc3RhdGU6ICcnLA0KICAgICAgICAgICAgICAgIHBvaW50czogJyd9DQoNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJQcm9jZXNzIGNvbXBsZXRlISBQdWxsIGFkZGVkLiIpDQoNCiAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgIH0sDQogICAgICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgfQ0KICAgIA0KDQo="},{"version":3,"sources":["schedulePull.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA","file":"schedulePull.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div>\r\n    <v-card class=\"mx-auto mt-3\">\r\n    <v-card-text>\r\n    <h2>Schedule a Pull</h2>\r\n    <v-form @submit.prevent id=\"schedulePull-form\">\r\n        <v-row>\r\n            <v-col cols=\"12\" md=\"3\">\r\n                <v-text-field v-model=\"form.date\" label=\"Event Date\" v-mask=\"'####-##-##'\" masked=\"true\" placeholder=\"YYYY-MM-DD\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n                <v-text-field v-model=\"form.time\" label=\"Event Time\" v-mask=\"'##:## aa'\" masked=\"true\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n               <v-select v-model=\"form.track\"\r\n            :items=\"trackTypes\"\r\n            label=\"Select a Track Type\"\r\n          ></v-select>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n              <v-checkbox\r\n        v-model=\"form.points\"\r\n        label=\"Will points be awarded?\"\r\n        required\r\n      ></v-checkbox>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n                <v-text-field v-model=\"form.title\" label=\"Event Title\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n                <v-textarea\r\n            dense\r\n            label=\"Event Description\"\r\n            v-model=\"form.description\"\r\n          ></v-textarea>\r\n            </v-col>\r\n\r\n            \r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-text-field v-model=\"form.address\" label=\"Event Address\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-text-field v-model=\"form.city\" label=\"Event City\"></v-text-field>\r\n               \r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-select :items=\"states\" label=\"Select a State\" v-model=\"form.state\"></v-select>\r\n               \r\n            </v-col>\r\n            \r\n        </v-row>\r\n        </v-form>\r\n    </v-card-text>\r\n    <v-card-actions>\r\n        <v-btn text form >Cancel</v-btn>\r\n        <v-btn text @click=\"addEvent\" form=\"schedulePull-form\">Add Event</v-btn>\r\n        <transition name=\"fade\">\r\n            <div v-if=\"performingRequest\" class=\"loading\">\r\n                <v-progress-linear\r\n        indeterminate\r\n        color=\"red darken-2\"\r\n      ></v-progress-linear>\r\n            </div>\r\n        </transition>\r\n    </v-card-actions>\r\n        </v-card>\r\n        \r\n        <v-card class=\"mt-5\">\r\n            <v-card-title>Pulls\r\n            <v-spacer></v-spacer>\r\n            <v-text-field v-model=\"search\" label=\"search\" single-line hide-details></v-text-field>\r\n            <v-text-field v-model=\"year\" label=\"year\" single-line hide-details></v-text-field>\r\n            </v-card-title>\r\n            <v-data-table :headers=\"headers\" :items=\"pulls\" :search=\"search\" group-by=\"year\">\r\n\r\n            </v-data-table>\r\n        </v-card>\r\n    \r\n    \r\n</div>\r\n</template>\r\n<script>\r\nconst fb = require('../../firebaseconfig.js')\r\nimport {db} from '../../firebaseconfig.js'\r\nimport { create } from 'domain'\r\n\r\n\r\nexport default {\r\n    name: 'schedulePull',\r\n    data() {\r\n        return {\r\n            search: '',\r\n            form: {\r\n                date: '',\r\n                time: '',\r\n                title: '',\r\n                track: false,\r\n                description: '',\r\n                address: '',\r\n                city: '',\r\n                state: '',\r\n                points: ''\r\n            },\r\n            trackTypes : [\r\n                'Dirt', 'Tar','N/A'\r\n            ],\r\n            pulls: {},\r\n            states: ['MN', 'WI'],\r\n            performingRequest: false,\r\n            year: '2020',\r\n            headers: [\r\n                {\r\n                    text: 'Event Date',\r\n                    align: 'left',\r\n                    sortable: true,\r\n                    value: 'date'\r\n                },\r\n                {\r\n                    text: 'Title',\r\n                    value: 'title'\r\n                },\r\n                {\r\n                    text: 'Address',\r\n                    value: 'address'\r\n                },\r\n                {\r\n                    text: 'City',\r\n                    value: 'city'\r\n                },\r\n                {\r\n                    text: 'State',\r\n                    value: 'state'\r\n                },\r\n                {\r\n                    text: 'Points',\r\n                    value: 'points'\r\n                },\r\n                {\r\n                    text: 'Track',\r\n                    value: 'track'\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    firestore() {\r\n            return {\r\n            pulls: db.collection(\"pulls\").orderBy(\"date\", \"desc\")\r\n            //cities: db.collection(\"cities\")\r\n        }},\r\n    computed: {\r\n        createCityRef() {\r\n              return '/cities/' + this.form.city.toLowerCase().split(' ').join('-') + ',+' +this.form.state.toLowerCase()\r\n            },\r\n        getYear() {\r\n            return this.form.date.substring(0,4)\r\n        }\r\n        },\r\n    methods: {\r\n        \r\n        addEvent: function() {\r\n            // start transition/loading view\r\n            this.performingRequest = true\r\n\r\n            // add pull to Firestore\r\n            db.collection(\"pulls\").add({\r\n                date: this.form.date,\r\n                time: this.form.time,\r\n                title: this.form.title,\r\n                track: this.form.track,\r\n                description: this.form.description,\r\n                address: this.form.address,\r\n                city: this.form.city,\r\n                state: this.form.state,\r\n                points: this.form.points,\r\n                year: this.getYear,\r\n                cityRef: this.createCityRef,\r\n                created: new Date()\r\n            }).then(function(docRef) {\r\n                console.log(\"Document written with ID: \", docRef.id)\r\n            });\r\n            \r\n            // Create City ID for document storage in Firestore\r\n            var cityDoc = this.form.city.toLowerCase().split(' ').join('-')+',+'+this.form.state.toLowerCase();\r\n\r\n            console.log(cityDoc);\r\n\r\n            // add city to Firestore\r\n            var cityRef = db.collection(\"cities\").doc(cityDoc);\r\n            return cityRef.set({\r\n                name: this.form.city,\r\n                state: this.form.state,\r\n                track: this.form.track\r\n            }).then(function() {\r\n                console.log(\"City successfully updated\");\r\n            }).catch(function(error){\r\n                console.error(\"Error updating document: \", error);\r\n            });\r\n\r\n            this.performingRequest = false;\r\n            this.form = {\r\n                date: '',\r\n                time: '',\r\n                title: '',\r\n                track: '',\r\n                description: '',\r\n                address: '',\r\n                city: '',\r\n                state: '',\r\n                points: ''}\r\n\r\n            console.log(\"Process complete! Pull added.\")\r\n\r\n        }\r\n            \r\n        },\r\n        components: {\r\n            \r\n        }\r\n    }\r\n    \r\n\r\n</script>"]}]}