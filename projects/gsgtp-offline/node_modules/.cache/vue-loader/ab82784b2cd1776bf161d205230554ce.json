{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\components\\addVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\components\\addVehicle.vue","mtime":1580684784951},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2RifSBmcm9tICcuLi8uLi9maXJlYmFzZWNvbmZpZy5qcycNCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2FkbWluJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcGVyZm9ybWluZ1JlcXVlc3Q6IGZhbHNlLA0KICAgICAgbWVtYmVyczoge30sDQogICAgICB2ZWhpY2xlOiB7fSwNCiAgICAgIHZlaGljbGVzOiB7fSwNCiAgICAgIHZlaGljbGVDbGFzc2VzOiB7fSwNCiAgICAgIHZlaGljbGVGb3JtOiB7DQogICAgICAgIG5hbWU6ICcnLA0KICAgICAgICBtZW1iZXJMb29rdXA6ICcnLA0KICAgICAgICAvL3RlY2hQYXNzZWQ6ICcnLA0KICAgICAgICB2ZWhpY2xlQ2xhc3NlczogW10sDQogICAgICAgIGltZzogJycNCiAgICB9DQogICAgfQ0KICB9LA0KICBmaXJlc3RvcmUoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vcHVsbDogZGIuY29sbGVjdGlvbigncHVsbHMnKS5kb2MoY3VycmVudFB1bGwpLA0KICAgICAgbWVtYmVyczogZGIuY29sbGVjdGlvbignbWVtYmVycycpLA0KICAgICAgdmVoaWNsZXM6IGRiLmNvbGxlY3Rpb24oJ3ZlaGljbGVzJyksDQogICAgICB2ZWhpY2xlQ2xhc3NlczogZGIuY29sbGVjdGlvbigndmVoaWNsZUNsYXNzZXMnKS5vcmRlckJ5KCJuYW1lIikNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoWydjdXJyZW50VXNlciddKQ0KICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIGFkZFZlaGljbGU6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgLy8gc3RhcnQgdHJhbnNpdGlvbi9sb2FkaW5nIHZpZXcNCiAgICAgICAgICAgIGxldCBwZiA9IHRoaXMucGVyZm9ybWluZ1JlcXVlc3QNCiAgICAgICAgICAgIHBmID0gdHJ1ZQ0KICAgICAgICAgICAgbGV0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkVmVoaWNsZUZvcm0iKQ0KICAgICAgICAgICAgbGV0IGRvYyA9IHRoaXMudmVoaWNsZUZvcm0ubmFtZS50b0xvd2VyQ2FzZSgpLnNwbGl0KCIgIikuam9pbigiLSIpDQogICAgICAgICAgICBsZXQgdmYgPSB0aGlzLnZlaGljbGVGb3JtDQoNCiAgICAgICAgICAgIC8vIGFkZCBwdWxsIHRvIEZpcmVzdG9yZQ0KICAgICAgICAgICAgZGIuY29sbGVjdGlvbigidmVoaWNsZXMiKS5kb2MoZG9jKS5zZXQoew0KICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMudmVoaWNsZUZvcm0ubmFtZSwNCiAgICAgICAgICAgICAgICBtZW1iZXI6IHRoaXMudmVoaWNsZUZvcm0ubWVtYmVyTG9va3VwLA0KICAgICAgICAgICAgICAgIGNsYXNzZXM6IHRoaXMudmVoaWNsZUZvcm0udmVoaWNsZUNsYXNzZXMsDQogICAgICAgICAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKSwNCiAgICAgICAgICAgICAgICBjcmVhdGVkQnk6IHRoaXMuY3VycmVudFVzZXIudWlkDQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGRvY1JlZikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJWZWhpY2xlIHdyaXR0ZW4gd2l0aCBJRDogIiwgZG9jUmVmKQ0KICAgICAgICAgICAgICAgIHBmID0gZmFsc2UNCiAgICAgICAgICAgICAgICB2Zi5uYW1lID0gJycNCiAgICAgICAgICAgICAgICB2Zi5tZW1iZXJMb29rdXAgPSAnJywNCiAgICAgICAgICAgICAgICB2Zi52ZWhpY2xlQ2xhc3NlcyA9ICcnLA0KICAgICAgICAgICAgICAgIHZmLmltZyA9ICcnDQogICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0pOw0KICAgICAgfSwNCiAgICAgIHJlc2V0Rm9ybSgpIHsgDQogICAgICAgICAgdGhpcy52ZWhpY2xlRm9ybS5uYW1lID0gICcnLCB0aGlzLnZlaGljbGVGb3JtLm1lbWJlckxvb2t1cCA9IG51bGwsIHRoaXMudmVoaWNsZUZvcm0udmVoaWNsZUNsYXNzZXMgPSBbXQ0KICAgIH0NCiAgfQ0KfQ0KDQo="},{"version":3,"sources":["addVehicle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addVehicle.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div>\r\n  <v-card>\r\n         <v-container>\r\n           <v-card-title>Add vehicle</v-card-title>\r\n           <v-card-text>\r\n           <v-form id=\"addVehicleForm\">\r\n            \r\n               <v-text-field label=\"Vehicle Name\" v-model=\"vehicleForm.name\" color=\"secondary\" hint=\"A unique name for the tractor that is different from all other members.\"></v-text-field>\r\n               <v-autocomplete \r\n                v-model=\"vehicleForm.memberLookup\" \r\n                label=\"Lookup Member\"\r\n                :items=\"members\" \r\n                hint=\"Select a member who is primarily responsible for this vehicle.\"\r\n                item-text=\"fullName\"\r\n                item-value=\"id\"\r\n                persistent-hint\r\n                color=\"secondary\"\r\n                clearable\r\n                return-object\r\n                chips\r\n                >\r\n                </v-autocomplete>\r\n                <v-autocomplete v-model=\"vehicleForm.vehicleClasses\" :items=\"vehicleClasses\" multiple chips return-object item-text=\"name\" item-value=\"name\" color=\"secondary\" label=\"Choose a vehicle class (or classes).\" clearable>\r\n                </v-autocomplete>\r\n                <transition name=\"fade\">\r\n    <div v-if=\"performingRequest\" class=\"loading\">\r\n        <v-progress-linear indeterminate color=\"info\"></v-progress-linear>\r\n    </div>\r\n</transition>\r\n                <!--<v-file-input label=\"Vehicle Image\" hint=\"(Optional) Upload a picture of the tractor.\"></v-file-input>-->\r\n               <v-card-actions><v-spacer></v-spacer><v-btn @click=\"resetForm\" text>Clear Form</v-btn><v-btn @click=\"addVehicle\" outlined color=\"green\">Add vehicle</v-btn></v-card-actions>\r\n             \r\n           </v-form>\r\n           </v-card-text>\r\n         </v-container>\r\n  </v-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {db} from '../../firebaseconfig.js'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'admin',\r\n  data() {\r\n    return {\r\n      performingRequest: false,\r\n      members: {},\r\n      vehicle: {},\r\n      vehicles: {},\r\n      vehicleClasses: {},\r\n      vehicleForm: {\r\n        name: '',\r\n        memberLookup: '',\r\n        //techPassed: '',\r\n        vehicleClasses: [],\r\n        img: ''\r\n    }\r\n    }\r\n  },\r\n  firestore() {\r\n    return {\r\n      //pull: db.collection('pulls').doc(currentPull),\r\n      members: db.collection('members'),\r\n      vehicles: db.collection('vehicles'),\r\n      vehicleClasses: db.collection('vehicleClasses').orderBy(\"name\")\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser'])\r\n  },\r\n    methods: {\r\n      addVehicle: function() {\r\n            // start transition/loading view\r\n            let pf = this.performingRequest\r\n            pf = true\r\n            let form = document.getElementById(\"addVehicleForm\")\r\n            let doc = this.vehicleForm.name.toLowerCase().split(\" \").join(\"-\")\r\n            let vf = this.vehicleForm\r\n\r\n            // add pull to Firestore\r\n            db.collection(\"vehicles\").doc(doc).set({\r\n                name: this.vehicleForm.name,\r\n                member: this.vehicleForm.memberLookup,\r\n                classes: this.vehicleForm.vehicleClasses,\r\n                created: new Date(),\r\n                createdBy: this.currentUser.uid\r\n            }).then(function(docRef) {\r\n                console.log(\"Vehicle written with ID: \", docRef)\r\n                pf = false\r\n                vf.name = ''\r\n                vf.memberLookup = '',\r\n                vf.vehicleClasses = '',\r\n                vf.img = ''\r\n      \r\n                \r\n                \r\n            });\r\n      },\r\n      resetForm() { \r\n          this.vehicleForm.name =  '', this.vehicleForm.memberLookup = null, this.vehicleForm.vehicleClasses = []\r\n    }\r\n  }\r\n}\r\n\r\n</script>"]}]}