{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\pullDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\pullDetails.vue","mtime":1579451934329},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZGIKfSBmcm9tICcuLi8uLi9maXJlYmFzZWNvbmZpZy5qcycKaW1wb3J0IHsKICBtYXBTdGF0ZQp9IGZyb20gJ3Z1ZXgnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3B1bGxEZXRhaWxzJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHVsbDoge30sCiAgICAgIGhvb2tzOiB7fSwKICAgICAgZWRpdEhvb2tFcnJNZXNzYWdlOiAnJywKICAgICAgZ3JhcGhMYWJlbHM6IFtdLAogICAgICBncmFwaFZhbHVlczogW10sCiAgICAgIGZpbHRlckhvb2tzOiAnJywKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgZWRpdGVkSXRlbTogewogICAgICAgIGlkOiAnJywKICAgICAgICBkaXN0YW5jZTogJycsCiAgICAgICAgcGxhY2U6ICcnLAogICAgICAgIHBvaW50czogJycsCiAgICAgICAgZHE6IGZhbHNlCiAgICAgIH0KICAgIH0KICB9LAogIGZpcmVzdG9yZSgpIHsKICAgIGxldCBjdXJyZW50UHVsbCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgcmV0dXJuIHsKICAgICAgcHVsbDogZGIuY29sbGVjdGlvbigncHVsbHMnKS5kb2MoY3VycmVudFB1bGwpLAogICAgICBob29rczogZGIuY29sbGVjdGlvbignaG9va3MnKS53aGVyZSgicHVsbElkIiwgIj09IiwgY3VycmVudFB1bGwpLm9yZGVyQnkoInZlaGljbGVDbGFzcyIsICJhc2MiKS5vcmRlckJ5KCJkaXN0YW5jZSIsICJkZXNjIikKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ2N1cnJlbnRVc2VyJywgJ3VzZXJQcm9maWxlJ10pLAogICAgYnlWZWhpY2xlQ2xhc3MoKSB7CiAgICAgIHJldHVybiBfLmNoYWluKHRoaXMuaG9va3MpLmdyb3VwQnkoInZlaGljbGVDbGFzcyIpCiAgICB9LAogIGRpc3RhbmNlcygpIHsKICAgIGxldCBkaXN0YW5jZSA9IHRoaXMuaG9va3MubWFwKGhvb2sgPT4gaG9vay5kaXN0YW5jZSkKICAgIGNvbnNvbGUubG9nKGRpc3RhbmNlKQogICAgbGV0IGhvb2tOdW1iZXJzID0gZGlzdGFuY2UubWFwKGZ1bmN0aW9uICh4KSB7cmV0dXJuIHBhcnNlSW50KHgsMTApfSkKICAgIGNvbnNvbGUubG9nKGhvb2tOdW1iZXJzKQogICAgcmV0dXJuIGhvb2tOdW1iZXJzCiAgfSwKICBjbGFzc2VzKCkgewogICBjb25zdCB1bmlxdWUgPSBbLi4ubmV3IFNldCh0aGlzLmhvb2tzLm1hcChob29rID0+IGhvb2sudmVoaWNsZUNsYXNzKSldCiAgICAKICAgIHJldHVybiB1bmlxdWUKICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb0JhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgIH0sCiAgICBlZGl0SXRlbShob29rKSB7CiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGhvb2spCiAgICAgIHRoaXMuZWRpdGVkSXRlbS5pZCA9IGhvb2suaWQKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICB9LAogICAgc2F2ZUl0ZW0oKSB7CiAgICAgIGxldCBob29rVXBkYXRlID0gdGhpcy5lZGl0ZWRJdGVtLmlkCiAgICAgIGRiLmNvbGxlY3Rpb24oJ2hvb2tzJykuZG9jKGhvb2tVcGRhdGUpLnVwZGF0ZSh7CiAgICAgICAgZGlzdGFuY2U6IHRoaXMuZWRpdGVkSXRlbS5kaXN0YW5jZSwKICAgICAgICBwbGFjZTogdGhpcy5lZGl0ZWRJdGVtLnBsYWNlLAogICAgICAgIHBvaW50czogdGhpcy5lZGl0ZWRJdGVtLnBvaW50cywKICAgICAgICBkcTogdGhpcy5lZGl0ZWRJdGVtLmRxLAogICAgICAgIHVwZGF0ZWRCeTogdGhpcy5jdXJyZW50VXNlci51aWQsCiAgICAgICAgdXBkYXRlZDogbmV3IERhdGUoKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygiUHVsbCB1cGRhdGVkISIpCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgIHRoaXMuZWRpdEhvb2tFcnJNZXNzYWdlID0gZXJyLm1lc3NhZ2UKICAgICAgICB9KQogICAgICB0aGlzLmNsb3NlKCkKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRJdGVtKQogICAgICB9LCAzMDApCiAgICB9LAogICAgZGVsZXRlSXRlbShob29rKSB7CiAgICAgIGRiLmNvbGxlY3Rpb24oJ2hvb2tzJykuZG9jKGhvb2suaWQpLmRlbGV0ZSgpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["pullDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pullDetails.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <v-dialog v-model=\"dialog\" max-width=\"400px\">\r\n      <v-card>\r\n        <v-card-title>\r\n          <span style=\"color:red\" class=\"mr-3\">{{editedItem.pull}} </span>\r\n          {{editedItem.vehicleClass}}\r\n        </v-card-title>\r\n        <v-card-subtitle>{{editedItem.vehicleName}}</v-card-subtitle>\r\n        <v-banner v-if=\"editHookErrMessage\">{{editHookErrMessage}}</v-banner>\r\n        <v-card-text><v-text-field v-model=\"editedItem.distance\" label=\"Distance\" color=\"red darken-3\"></v-text-field>\r\n        <v-text-field v-model=\"editedItem.place\" label=\"Place\" color=\"red darken-3\"></v-text-field>\r\n        <v-text-field v-model=\"editedItem.points\" label=\"Points\" color=\"red darken-3\"></v-text-field>\r\n        <v-switch v-model=\"editedItem.dq\" label=\"DQ?\" color=\"red darken-3\" inset></v-switch>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn text @click.stop=\"close\">Cancel</v-btn>\r\n          <v-btn color=\"green\" outlined @click.stop=\"saveItem()\">Save</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-btn class=\"mb-3\" text color=\"red darken-3\" @click=\"goBack\">\r\n      <v-icon class=\"mr-4\">fad fa-arrow-circle-left</v-icon> Go back\r\n    </v-btn>\r\n    <v-card class=\"mx-auto\">\r\n      <v-card-title>{{pull.title}}</v-card-title>\r\n      <v-card-subtitle>{{pull.date | moment(\"dddd, MMMM Do YYYY\")}} {{pull.time}}</v-card-subtitle>\r\n      <v-card-text>{{pull.address}}, {{pull.city}}<br>\r\n        {{pull.description}}\r\n      </v-card-text>\r\n    <!--<v-sparkline :value=\"distances\" type=\"trend\" auto-line-width=\"true\" show-labels=\"true\"></v-sparkline>-->\r\n    </v-card>\r\n\r\n    <div v-if=\"pull.track == 'N/A'\" class=\"mt-4\">\r\n      <v-banner two-line color=\"green\">\r\n        <v-avatar slot=\"icon\" size=\"60px\">\r\n          <v-icon dark>far fa-person-sign</v-icon>\r\n        </v-avatar>\r\n        No tractors necessary! This is an event where we all meet up and talk shop.\r\n      </v-banner>\r\n    </div>\r\n    <div v-else>\r\n      \r\n      <div v-for=\"c in classes\" :key=\"c['.index']\">\r\n        <v-toolbar class=\"mt-5\" dark color=\"red darken-4\">{{c}}</v-toolbar>\r\n        <v-simple-table v-if=\"hooks.vehicleClass = c\" fixed-header>\r\n          \r\n          <thead>\r\n            <tr>\r\n              <th class=\"text-left\">Vehicle</th>\r\n              <th class=\"text-left\">Puller</th>\r\n              <th class=\"text-left\">Distance</th>\r\n              <th class=\"text-left\">Points</th>\r\n              <th class=\"text-left\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody v-for=\"(hook) in hooks\" :key=\"hook['.key']\">\r\n            <tr v-if=\"hook.vehicleClass == c\">\r\n              <span hidden>{{hook.id}}</span>\r\n              <td>{{hook.vehicleName}}</td>\r\n              <td>{{hook.pullerName}}</td>\r\n              <td>{{hook.distance}}</td>\r\n              <td>{{hook.points}}</td>\r\n              <td>\r\n                <v-icon @click=\"editItem(hook)\" >fad fa-pencil</v-icon>\r\n                <v-icon @click=\"deleteItem(hook)\" class=\"ml-3\">fad fa-trash-alt</v-icon>\r\n                \r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n\r\n        </v-simple-table>\r\n        \r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    db\r\n  } from '../../firebaseconfig.js'\r\n  import {\r\n    mapState\r\n  } from 'vuex'\r\n\r\n  export default {\r\n    name: 'pullDetails',\r\n    data() {\r\n      return {\r\n        pull: {},\r\n        hooks: {},\r\n        editHookErrMessage: '',\r\n        graphLabels: [],\r\n        graphValues: [],\r\n        filterHooks: '',\r\n        dialog: false,\r\n        editedItem: {\r\n          id: '',\r\n          distance: '',\r\n          place: '',\r\n          points: '',\r\n          dq: false\r\n        }\r\n      }\r\n    },\r\n    firestore() {\r\n      let currentPull = this.$route.params.id\r\n      return {\r\n        pull: db.collection('pulls').doc(currentPull),\r\n        hooks: db.collection('hooks').where(\"pullId\", \"==\", currentPull).orderBy(\"vehicleClass\", \"asc\").orderBy(\"distance\", \"desc\")\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState(['currentUser', 'userProfile']),\r\n      byVehicleClass() {\r\n        return _.chain(this.hooks).groupBy(\"vehicleClass\")\r\n      },\r\n    distances() {\r\n      let distance = this.hooks.map(hook => hook.distance)\r\n      console.log(distance)\r\n      let hookNumbers = distance.map(function (x) {return parseInt(x,10)})\r\n      console.log(hookNumbers)\r\n      return hookNumbers\r\n    },\r\n    classes() {\r\n     const unique = [...new Set(this.hooks.map(hook => hook.vehicleClass))]\r\n      \r\n      return unique\r\n    }\r\n    },\r\n    methods: {\r\n      goBack() {\r\n        this.$router.go(-1)\r\n      },\r\n      editItem(hook) {\r\n        this.editedItem = Object.assign({}, hook)\r\n        this.editedItem.id = hook.id\r\n        this.dialog = true\r\n      },\r\n      saveItem() {\r\n        let hookUpdate = this.editedItem.id\r\n        db.collection('hooks').doc(hookUpdate).update({\r\n          distance: this.editedItem.distance,\r\n          place: this.editedItem.place,\r\n          points: this.editedItem.points,\r\n          dq: this.editedItem.dq,\r\n          updatedBy: this.currentUser.uid,\r\n          updated: new Date()\r\n        }).then(() => {\r\n          console.log(\"Pull updated!\")\r\n        }).catch(err => {\r\n          console.log(err)\r\n          this.editHookErrMessage = err.message\r\n          })\r\n        this.close()\r\n      },\r\n      close() {\r\n        this.dialog = false\r\n        setTimeout(() => {\r\n          this.editedItem = Object.assign({}, this.defaultItem)\r\n        }, 300)\r\n      },\r\n      deleteItem(hook) {\r\n        db.collection('hooks').doc(hook.id).delete();\r\n      }\r\n    }\r\n  }\r\n</script>"]}]}