{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\schedulePull.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\views\\schedulePull.vue","mtime":1579352704589},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBmYiA9IHJlcXVpcmUoJy4uLy4uL2ZpcmViYXNlY29uZmlnLmpzJykNCmltcG9ydCB7ZGJ9IGZyb20gJy4uLy4uL2ZpcmViYXNlY29uZmlnLmpzJw0KaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnZG9tYWluJw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnc2NoZWR1bGVQdWxsJywNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc2VhcmNoOiAnJywNCiAgICAgICAgICAgIGZvcm06IHsNCiAgICAgICAgICAgICAgICBkYXRlOiAnJywNCiAgICAgICAgICAgICAgICB0aW1lOiAnJywNCiAgICAgICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICAgICAgdHJhY2s6IGZhbHNlLA0KICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywNCiAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJywNCiAgICAgICAgICAgICAgICBjaXR5OiAnJywNCiAgICAgICAgICAgICAgICBzdGF0ZTogJycsDQogICAgICAgICAgICAgICAgcG9pbnRzOiAnJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHRyYWNrVHlwZXMgOiBbDQogICAgICAgICAgICAgICAgJ0RpcnQnLCAnVGFyJywnTi9BJw0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIHB1bGxzOiB7fSwNCiAgICAgICAgICAgIHN0YXRlczogWydNTicsICdXSSddLA0KICAgICAgICAgICAgcGVyZm9ybWluZ1JlcXVlc3Q6IGZhbHNlLA0KICAgICAgICAgICAgeWVhcjogJzIwMjAnLA0KICAgICAgICAgICAgaGVhZGVyczogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0V2ZW50IERhdGUnLA0KICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdkYXRlJw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnVGl0bGUnLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3RpdGxlJw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQWRkcmVzcycsDQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnYWRkcmVzcycNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NpdHknLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ2NpdHknDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdTdGF0ZScsDQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnc3RhdGUnDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdQb2ludHMnLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3BvaW50cycNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1RyYWNrJywNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICd0cmFjaycNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgIH0NCiAgICB9LA0KICAgIGZpcmVzdG9yZSgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBwdWxsczogZGIuY29sbGVjdGlvbigicHVsbHMiKS5vcmRlckJ5KCJkYXRlIiwgImRlc2MiKQ0KICAgICAgICAgICAgLy9jaXRpZXM6IGRiLmNvbGxlY3Rpb24oImNpdGllcyIpDQogICAgICAgIH19LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNyZWF0ZUNpdHlSZWYoKSB7DQogICAgICAgICAgICAgIHJldHVybiAnL2NpdGllcy8nICsgdGhpcy5mb3JtLmNpdHkudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpLmpvaW4oJy0nKSArICcsKycgK3RoaXMuZm9ybS5zdGF0ZS50b0xvd2VyQ2FzZSgpDQogICAgICAgICAgICB9LA0KICAgICAgICBnZXRZZWFyKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybS5kYXRlLnN1YnN0cmluZygwLDQpDQogICAgICAgIH0NCiAgICAgICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGdvQmFjazogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgIH0sDQogICAgICAgIGFkZEV2ZW50OiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIC8vIHN0YXJ0IHRyYW5zaXRpb24vbG9hZGluZyB2aWV3DQogICAgICAgICAgICB0aGlzLnBlcmZvcm1pbmdSZXF1ZXN0ID0gdHJ1ZQ0KDQogICAgICAgICAgICAvLyBhZGQgcHVsbCB0byBGaXJlc3RvcmUNCiAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInB1bGxzIikuYWRkKHsNCiAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLmZvcm0uZGF0ZSwNCiAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmZvcm0udGltZSwNCiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5mb3JtLnRpdGxlLA0KICAgICAgICAgICAgICAgIHRyYWNrOiB0aGlzLmZvcm0udHJhY2ssDQogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZm9ybS5kZXNjcmlwdGlvbiwNCiAgICAgICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmZvcm0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICBjaXR5OiB0aGlzLmZvcm0uY2l0eSwNCiAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy5mb3JtLnN0YXRlLA0KICAgICAgICAgICAgICAgIHBvaW50czogdGhpcy5mb3JtLnBvaW50cywNCiAgICAgICAgICAgICAgICB5ZWFyOiB0aGlzLmdldFllYXIsDQogICAgICAgICAgICAgICAgY2l0eVJlZjogdGhpcy5jcmVhdGVDaXR5UmVmLA0KICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKCkNCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oZG9jUmVmKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRvY3VtZW50IHdyaXR0ZW4gd2l0aCBJRDogIiwgZG9jUmVmLmlkKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENyZWF0ZSBDaXR5IElEIGZvciBkb2N1bWVudCBzdG9yYWdlIGluIEZpcmVzdG9yZQ0KICAgICAgICAgICAgdmFyIGNpdHlEb2MgPSB0aGlzLmZvcm0uY2l0eS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJykuam9pbignLScpKycsKycrdGhpcy5mb3JtLnN0YXRlLnRvTG93ZXJDYXNlKCk7DQoNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNpdHlEb2MpOw0KDQogICAgICAgICAgICAvLyBhZGQgY2l0eSB0byBGaXJlc3RvcmUNCiAgICAgICAgICAgIHZhciBjaXR5UmVmID0gZGIuY29sbGVjdGlvbigiY2l0aWVzIikuZG9jKGNpdHlEb2MpOw0KICAgICAgICAgICAgcmV0dXJuIGNpdHlSZWYuc2V0KHsNCiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmZvcm0uY2l0eSwNCiAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy5mb3JtLnN0YXRlLA0KICAgICAgICAgICAgICAgIHRyYWNrOiB0aGlzLmZvcm0udHJhY2sNCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkNpdHkgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQiKTsNCiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciB1cGRhdGluZyBkb2N1bWVudDogIiwgZXJyb3IpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHRoaXMucGVyZm9ybWluZ1JlcXVlc3QgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgICAgICAgICBkYXRlOiAnJywNCiAgICAgICAgICAgICAgICB0aW1lOiAnJywNCiAgICAgICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICAgICAgdHJhY2s6ICcnLA0KICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywNCiAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJywNCiAgICAgICAgICAgICAgICBjaXR5OiAnJywNCiAgICAgICAgICAgICAgICBzdGF0ZTogJycsDQogICAgICAgICAgICAgICAgcG9pbnRzOiAnJ30NCg0KICAgICAgICAgICAgY29uc29sZS5sb2coIlByb2Nlc3MgY29tcGxldGUhIFB1bGwgYWRkZWQuIikNCg0KICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgfSwNCiAgICAgICAgY29tcG9uZW50czogew0KICAgICAgICAgICAgDQogICAgICAgIH0NCiAgICB9DQogICAgDQoNCg=="},{"version":3,"sources":["schedulePull.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA","file":"schedulePull.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div>\r\n    <v-btn class=\"mb-3\" text color=\"red darken-3\" @click=\"goBack\"><v-icon class=\"mr-4\">fad fa-arrow-circle-left</v-icon> Go back</v-btn>\r\n    <v-card class=\"mx-auto mt-3\">\r\n    <v-card-text>\r\n    <h2>Schedule a Pull</h2>\r\n    <v-form @submit.prevent id=\"schedulePull-form\">\r\n        <v-row>\r\n            <v-col cols=\"12\" md=\"3\">\r\n                <v-text-field v-model=\"form.date\" label=\"Event Date\" v-mask=\"'####-##-##'\" masked=\"true\" placeholder=\"YYYY-MM-DD\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n                <v-text-field v-model=\"form.time\" label=\"Event Time\" v-mask=\"'##:## aa'\" masked=\"true\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n               <v-select v-model=\"form.track\"\r\n            :items=\"trackTypes\"\r\n            label=\"Select a Track Type\"\r\n          ></v-select>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"3\">\r\n              <v-checkbox\r\n        v-model=\"form.points\"\r\n        label=\"Will points be awarded?\"\r\n        required\r\n      ></v-checkbox>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n                <v-text-field v-model=\"form.title\" label=\"Event Title\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n                <v-textarea\r\n            dense\r\n            label=\"Event Description\"\r\n            v-model=\"form.description\"\r\n          ></v-textarea>\r\n            </v-col>\r\n\r\n            \r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-text-field v-model=\"form.address\" label=\"Event Address\"></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-text-field v-model=\"form.city\" label=\"Event City\"></v-text-field>\r\n               \r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"4\">\r\n                <v-select :items=\"states\" label=\"Select a State\" v-model=\"form.state\"></v-select>\r\n               \r\n            </v-col>\r\n            \r\n        </v-row>\r\n        </v-form>\r\n    </v-card-text>\r\n    <v-card-actions>\r\n        <v-btn text form >Cancel</v-btn>\r\n        <v-btn text @click=\"addEvent\" form=\"schedulePull-form\">Add Event</v-btn>\r\n        <transition name=\"fade\">\r\n            <div v-if=\"performingRequest\" class=\"loading\">\r\n                <v-progress-linear\r\n        indeterminate\r\n        color=\"red darken-2\"\r\n      ></v-progress-linear>\r\n            </div>\r\n        </transition>\r\n    </v-card-actions>\r\n        </v-card>\r\n        \r\n        <v-card class=\"mt-5\">\r\n            <v-card-title>Pulls\r\n            <v-spacer></v-spacer>\r\n            <v-text-field v-model=\"search\" label=\"search\" single-line hide-details></v-text-field>\r\n            <v-text-field v-model=\"year\" label=\"year\" single-line hide-details></v-text-field>\r\n            </v-card-title>\r\n            <v-data-table :headers=\"headers\" :items=\"pulls\" :search=\"search\" group-by=\"year\">\r\n\r\n            </v-data-table>\r\n        </v-card>\r\n    \r\n    \r\n</div>\r\n</template>\r\n<script>\r\nconst fb = require('../../firebaseconfig.js')\r\nimport {db} from '../../firebaseconfig.js'\r\nimport { create } from 'domain'\r\n\r\n\r\nexport default {\r\n    name: 'schedulePull',\r\n    data() {\r\n        return {\r\n            search: '',\r\n            form: {\r\n                date: '',\r\n                time: '',\r\n                title: '',\r\n                track: false,\r\n                description: '',\r\n                address: '',\r\n                city: '',\r\n                state: '',\r\n                points: ''\r\n            },\r\n            trackTypes : [\r\n                'Dirt', 'Tar','N/A'\r\n            ],\r\n            pulls: {},\r\n            states: ['MN', 'WI'],\r\n            performingRequest: false,\r\n            year: '2020',\r\n            headers: [\r\n                {\r\n                    text: 'Event Date',\r\n                    align: 'left',\r\n                    sortable: true,\r\n                    value: 'date'\r\n                },\r\n                {\r\n                    text: 'Title',\r\n                    value: 'title'\r\n                },\r\n                {\r\n                    text: 'Address',\r\n                    value: 'address'\r\n                },\r\n                {\r\n                    text: 'City',\r\n                    value: 'city'\r\n                },\r\n                {\r\n                    text: 'State',\r\n                    value: 'state'\r\n                },\r\n                {\r\n                    text: 'Points',\r\n                    value: 'points'\r\n                },\r\n                {\r\n                    text: 'Track',\r\n                    value: 'track'\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    firestore() {\r\n            return {\r\n            pulls: db.collection(\"pulls\").orderBy(\"date\", \"desc\")\r\n            //cities: db.collection(\"cities\")\r\n        }},\r\n    computed: {\r\n        createCityRef() {\r\n              return '/cities/' + this.form.city.toLowerCase().split(' ').join('-') + ',+' +this.form.state.toLowerCase()\r\n            },\r\n        getYear() {\r\n            return this.form.date.substring(0,4)\r\n        }\r\n        },\r\n    methods: {\r\n        goBack: function() {\r\n            this.$router.go(-1)\r\n        },\r\n        addEvent: function() {\r\n            // start transition/loading view\r\n            this.performingRequest = true\r\n\r\n            // add pull to Firestore\r\n            db.collection(\"pulls\").add({\r\n                date: this.form.date,\r\n                time: this.form.time,\r\n                title: this.form.title,\r\n                track: this.form.track,\r\n                description: this.form.description,\r\n                address: this.form.address,\r\n                city: this.form.city,\r\n                state: this.form.state,\r\n                points: this.form.points,\r\n                year: this.getYear,\r\n                cityRef: this.createCityRef,\r\n                created: new Date()\r\n            }).then(function(docRef) {\r\n                console.log(\"Document written with ID: \", docRef.id)\r\n            });\r\n            \r\n            // Create City ID for document storage in Firestore\r\n            var cityDoc = this.form.city.toLowerCase().split(' ').join('-')+',+'+this.form.state.toLowerCase();\r\n\r\n            console.log(cityDoc);\r\n\r\n            // add city to Firestore\r\n            var cityRef = db.collection(\"cities\").doc(cityDoc);\r\n            return cityRef.set({\r\n                name: this.form.city,\r\n                state: this.form.state,\r\n                track: this.form.track\r\n            }).then(function() {\r\n                console.log(\"City successfully updated\");\r\n            }).catch(function(error){\r\n                console.error(\"Error updating document: \", error);\r\n            });\r\n\r\n            this.performingRequest = false;\r\n            this.form = {\r\n                date: '',\r\n                time: '',\r\n                title: '',\r\n                track: '',\r\n                description: '',\r\n                address: '',\r\n                city: '',\r\n                state: '',\r\n                points: ''}\r\n\r\n            console.log(\"Process complete! Pull added.\")\r\n\r\n        }\r\n            \r\n        },\r\n        components: {\r\n            \r\n        }\r\n    }\r\n    \r\n\r\n</script>"]}]}