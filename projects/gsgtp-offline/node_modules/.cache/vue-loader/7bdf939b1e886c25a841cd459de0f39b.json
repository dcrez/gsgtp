{"remainingRequest":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\components\\member.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\src\\components\\member.vue","mtime":1583707693825},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\danie\\GitHub\\dcrez.github.io\\projects\\gsgtp-offline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcFN0YXRlfSBmcm9tICd2dWV4Jw0KaW1wb3J0IHtkYn0gZnJvbSAnLi4vLi4vZmlyZWJhc2Vjb25maWcuanMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnbWVtYmVyJywNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbWVtYmVyUmVmOiB7fSwNCiAgICAgICAgICAgIHZlaGljbGVzOiB7fSwNCiAgICAgICAgICAgIHRvZGF5OiBuZXcgRGF0ZSgpLA0KICAgICAgICAgICAgDQogICAgICAgIH0NCiAgICB9LA0KICAgIGZpcmVzdG9yZSgpIHsNCiAgICAgICAgbGV0IG1lbWJlclVzZXJJZCA9IHRoaXMuY3VycmVudFVzZXIudWlkDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBtZW1iZXJSZWY6IGRiLmNvbGxlY3Rpb24oJ21lbWJlcnMnKS5kb2MobWVtYmVyVXNlcklkKSwNCiAgICAgICAgICAgIHZlaGljbGVzOiBkYi5jb2xsZWN0aW9uKCd2ZWhpY2xlcycpLndoZXJlKCJtZW1iZXIudXNlcklkIiwgIj09IiwgbWVtYmVyVXNlcklkKQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKFsnY3VycmVudFVzZXInLCAndXNlclByb2ZpbGUnXSksDQogICAgZmxhdE1lbWJlcigpIHsNCiAgICAgICAgdmFyIG1SID0gdGhpcy5tZW1iZXJSZWYNCiAgICAgICAgXy5mbGF0TWFwKG1SKQ0KICAgICAgICByZXR1cm4gbVINCiAgICB9LA0KICAgIGR1ZXNFbmREYXRlKCkgew0KICAgICAgICBsZXQgbVIgPSB0aGlzLm1lbWJlclJlZg0KICAgICAgICBsZXQgY0QgPSB0aGlzLm1lbWJlclJlZi5jdXJyZW50RHVlcw0KICAgICAgICAvL2NvbnNvbGUubG9nKGNEKQ0KICAgICAgICAvL2NvbnNvbGUubG9nKGNELmVmZmVjdGl2ZUVuZCkNCiAgICAgICAgaWYgKG1SICE9IG51bGwgJiYgY0QgIT0gbnVsbCkgew0KICAgICAgICAgICAgbGV0IGVmZkVuZCA9IGNELmVmZmVjdGl2ZUVuZA0KICAgICAgICAgICAgbGV0IGVmZkVuZFNlYyA9IGVmZkVuZC5zZWNvbmRzDQogICAgICAgICAgICBsZXQgdXRjRGF0ZSA9IG5ldyBEYXRlKGVmZkVuZCAqIDEwMDApDQogICAgICAgICAgICByZXR1cm4gdXRjRGF0ZSAgIA0KICAgICAgICB9IGVsc2Uge3JldHVybiAnTm90IGN1cnJlbnQnfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgICAgdmVoaWNsZURldGFpbHModikgew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6IGAvdmVoaWNsZS8ke3YuaWR9YA0KICAgICAgICB9KSB9LA0KICAgICAgICBtZW1iZXJEZXRhaWxzKG0pIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOiBgL21lbWJlci8ke20udXNlcklkfWANCiAgICAgICAgfSkgfSwNCiAgfQ0KfQ0K"},{"version":3,"sources":["member.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"member.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"mt-5\">\r\n        \r\n        <div>\r\n\r\n        <v-card class=\"mx-auto mb-5\"  color=\"grey lighten-4\" elevation=\"0\">\r\n            <v-card-text class=\"text--primary\" >\r\n            <div class=\"display-1\">{{flatMember.fullName}}</div>\r\n             <div class=\"mb-3\"><a href=\"#\" @click=\"memberDetails(flatMember)\">Manage membership</a></div>\r\n            <div v-if=\"vehicles\">\r\n            <p class=\"overline\">Vehicle(s)</p>\r\n            <v-row style=\"margin-top:-20px; padding:10px;\">\r\n                <div v-for=\"v in vehicles\" :key=\"v.id\" class=\"mr-3 mt-3\">\r\n                    <v-btn text outlined @click=\"vehicleDetails(v)\">{{v.name}}</v-btn>\r\n                </div>    \r\n            </v-row>\r\n            </div>\r\n            </v-card-text>\r\n        </v-card>\r\n       \r\n        <v-alert class=\"mt-2\" type=\"error\" dense text v-if=\"duesEndDate < today\">Not currently earning points. Pay your dues to start earning!</v-alert>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport {db} from '../../firebaseconfig.js'\r\n\r\nexport default {\r\n    name: 'member',\r\n    data() {\r\n        return {\r\n            memberRef: {},\r\n            vehicles: {},\r\n            today: new Date(),\r\n            \r\n        }\r\n    },\r\n    firestore() {\r\n        let memberUserId = this.currentUser.uid\r\n        return {\r\n            memberRef: db.collection('members').doc(memberUserId),\r\n            vehicles: db.collection('vehicles').where(\"member.userId\", \"==\", memberUserId)\r\n        }\r\n    },\r\n    computed: {\r\n    ...mapState(['currentUser', 'userProfile']),\r\n    flatMember() {\r\n        var mR = this.memberRef\r\n        _.flatMap(mR)\r\n        return mR\r\n    },\r\n    duesEndDate() {\r\n        let mR = this.memberRef\r\n        let cD = this.memberRef.currentDues\r\n        //console.log(cD)\r\n        //console.log(cD.effectiveEnd)\r\n        if (mR != null && cD != null) {\r\n            let effEnd = cD.effectiveEnd\r\n            let effEndSec = effEnd.seconds\r\n            let utcDate = new Date(effEnd * 1000)\r\n            return utcDate   \r\n        } else {return 'Not current'}\r\n    }\r\n  },\r\n  methods: {\r\n      vehicleDetails(v) {\r\n        this.$router.push({\r\n        path: `/vehicle/${v.id}`\r\n        }) },\r\n        memberDetails(m) {\r\n        this.$router.push({\r\n        path: `/member/${m.userId}`\r\n        }) },\r\n  }\r\n}\r\n</script>"]}]}